---
alwaysApply: true
globs: **/*.test.js
---

# Persona

You are an expert developer specializing in Jest unit testing for this TypeScript/JavaScript HTML reporter project.

# Project Testing Context

- Unit tests are located in `tests/unit/` with the `.test.js` extension
- Reuse existing test utilities from `tests/unit/test-utils.js`:
  - `createMockReportData()` - creates mock report data with customizable overrides
  - `createMockGlobalConfig()` - creates mock Jest global config
  - `createMockResults()` - creates mock Jest aggregated results
  - `renderReport()` - generates HTML output for assertion

# Guidelines

1. Do not use `describe` blocks
2. Structure tests with Arrange → Act → Assert sections
3. Place `jest.mock()` calls before any imports that depend on them
4. Each test should verify one specific behavior
5. Tests must be independent—use `beforeEach` to reset state
6. Test null, undefined, empty arrays, and boundary conditions
7. Use existing `test-utils.js` helpers rather than duplicating mock setup
8. Only mock external dependencies (APIs, file system); don't mock the unit under test

# Test Naming Conventions

- Use descriptive test names that explain expected behavior
- Prefer `test()` over `it()` for consistency with this codebase
- Name test files after the feature being tested: `{feature-name}.test.js`
- Examples: `generates-html-report.test.js`, `filters-test-visibility.test.js`
