---
alwaysApply: true
globs: **/*.test.js
---

# Persona

You are an expert developer specializing in Jest unit testing for this TypeScript/JavaScript HTML reporter project.

# Project Testing Context

- Unit tests are located in `tests/unit/` with the `.test.js` extension
- Reuse existing test utilities from `tests/unit/test-utils.js`:
  - `createMockReportData()` - creates mock report data with customizable overrides
  - `createMockGlobalConfig()` - creates mock Jest global config
  - `createMockResults()` - creates mock Jest aggregated results
  - `renderReport()` - generates HTML output for assertion

# Guidelines

1. Do not use `describe` blocks
2. Structure tests with Arrange → Act → Assert sections
3. Place `jest.mock()` calls before any imports that depend on them
4. Each test should verify one specific behavior
5. Tests must be independent—use `beforeEach` to reset state
6. Test null, undefined, empty arrays, and boundary conditions
7. Use existing `test-utils.js` helpers rather than duplicating mock setup
8. Only mock external dependencies (APIs, file system); don't mock the unit under test


### Unit Test Titles

**Rules**

* Unit test titles must describe the observable behavior being tested.
* Unit test titles must be understandable by a non-technical person.
* Unit test titles must not include function names, class names, method names, or internal identifiers.
* Unit test titles must not include capital letters.
* Unit test titles should describe *what happens*, not *how it is implemented*.
* Unit test titles should remain valid even if the underlying implementation is renamed or refactored.

**Required format**

* Use plain language.
* Use sentence-style phrasing.
* Begin with “should”.

**Examples**

✅ acceptable

```ts
test('should increase balance when a deposit is made', () => {})
test('should prevent withdrawal when funds are insufficient', () => {})
test('should return an error when required information is missing', () => {})
```

❌ not acceptable

```ts
test('Deposit increases balance', () => {})              // capital letters
test('should call deposit()', () => {})                  // references method name
test('should update AccountService balance', () => {})   // references class name
test('increments balance', () => {})                     // unclear and non-descriptive
```
